{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ super() }}{% endblock title %}

{% block meta_description %}{% if page.description %}{{ page.description }}{% else %}Lev Vereshchagin's personal website{% endif %}{% endblock meta_description %}

{% block content %}
<style>
    .page-title {
        font-size: 2rem;
        margin-top: 0;
        margin-bottom: 0;
        text-wrap: balance;
    }

    .post-meta {
        color: var(--color-text-secondary);
        margin-top: var(--size-xs);
        margin-bottom: var(--size-md);
        display: flex;
        flex-wrap: wrap;
    }

    .post-meta > * {
        white-space: nowrap;
    }

    .post-footer {
        margin-top: var(--size-lg);
        display: flex;
        flex-wrap: wrap;
        column-gap: var(--size-lg);
        row-gap: var(--size-sm);
        text-wrap: balance;
    }

    .post-footer > *:first-child {
        flex: 1;
        white-space: nowrap;
    }

    .page-content {
        margin-top: var(--size-md);
    }

    @media (prefers-color-scheme: dark) {
        /*
        * theme "Visual Studio Dark" generated by syntect
        */

        .z-code {
        color: #dcdcdc;
        background-color: #1e1e1e;
        }

        .z-comment {
        color: #608b4e;
        }
        .z-variable {
        color: #dcdcdc;
        }
        .z-keyword {
        color: #569cd6;
        }
        .z-keyword.z-operator.z-comparison {
        color: #dcdcdc;
        }
        .z-keyword.z-operator.z-assignment {
        color: #dcdcdc;
        }
        .z-keyword.z-operator.z-arithmetic {
        color: #dcdcdc;
        }
        .z-constant.z-numeric {
        color: #b5cea8;
        }
        .z-constant {
        color: #b4cea8;
        }
        .z-constant.z-language {
        color: #569cd6;
        }
        .z-constant.z-language.z-boolean {
        color: #569cd6;
        }
        .z-string {
        color: #d69d85;
        }
        .z-constant.z-character.z-escape, .z-string .z-source {
        color: #e3bbab;
        }
        .z-meta.z-preprocessor {
        color: #9b9b9b;
        }
        .z-keyword.z-control.z-import {
        color: #9b9b9b;
        }
        .z-entity.z-name.z-function, .z-keyword.z-other.z-name-of-parameter.z-objc {
        color: #dcdcdc;
        }
        .z-entity.z-name.z-type {
        color: #4ec9b0;
        }
        .z-storage.z-type {
        color: #569cd6;
        }
        .z-storage.z-modifier {
        color: #569cd6;
        }
        .z-entity.z-other.z-inherited-class {
        color: #4ec9b0;
        }
        .z-variable.z-parameter {
        }
        .z-storage.z-type.z-method {
        color: #70727e;
        }
        .z-meta.z-section .z-entity.z-name.z-section, .z-declaration.z-section .z-entity.z-name.z-section {
        }
        .z-support.z-function {
        color: #dcdcdc;
        }
        .z-support.z-class, .z-support.z-type {
        color: #dcdcdc;
        }
        .z-support.z-constant {
        color: #b5cea8;
        }
        .z-support.z-variable {
        color: #dcdcdc;
        }
        .z-keyword.z-operator.z-js {
        color: #687687;
        }
        .z-invalid {
        color: #ff3333;
        }
        .z-invalid.z-deprecated.z-trailing-whitespace {
        background-color: #ff3333;
        }
        .z-text .z-source, .z-string.z-unquoted {
        background-color: #282828;
        }
        .z-meta.z-xml-processing, .z-declaration.z-xml-processing {
        color: #68685b;
        }
        .z-meta.z-doctype, .z-declaration.z-doctype {
        color: #808080;
        }
        .z-meta.z-doctype.z-DTD, .z-declaration.z-doctype.z-DTD {
        }
        .z-meta.z-tag, .z-declaration.z-tag {
        color: #808080;
        }
        .z-entity.z-name.z-tag {
        color: #569cd6;
        }
        .z-entity.z-other.z-attribute-name {
        color: #92caf4;
        }
        .z-string.z-quoted.z-double.z-xml, .z-string.z-quoted.z-double.z-html {
        color: #c8c8c8;
        }
        .z-markup.z-heading {
        color: #569cd6;
        }
        .z-markup.z-quote {
        color: #dcdcdc;
        }
        .z-markup.z-list {
        color: #dcdcdc;
        }
        .z-meta.z-selector.z-css .z-entity.z-name.z-tag {
        color: #d7ba7d;
        }
        .z-meta.z-selector.z-css .z-entity.z-other.z-attribute-name.z-tag.z-pseudo-class {
        color: #d7ba7d;
        }
        .z-meta.z-selector.z-css .z-entity.z-other.z-attribute-name.z-id {
        color: #d7ba7d;
        }
        .z-meta.z-selector.z-css .z-entity.z-other.z-attribute-name.z-class {
        color: #d7ba7d;
        }
        .z-support.z-type.z-property-name.z-css {
        color: #9cdcfe;
        }
        .z-meta.z-property-group .z-support.z-constant.z-property-value.z-css, .z-meta.z-property-value .z-support.z-constant.z-property-value.z-css {
        color: #c8c8c8;
        }
        .z-meta.z-preprocessor.z-at-rule .z-keyword.z-control.z-at-rule {
        color: #87cefa;
        }
        .z-source.z-cs .z-comment.z-block.z-documentation.z-source.z-cs .z-meta.z-tag.z-xml, .z-source.z-cs .z-comment.z-block.z-documentation.z-source.z-cs .z-meta.z-tag.z-xml .z-entity.z-name.z-tag.z-localname.z-xml, .z-source.z-cs .z-comment.z-block.z-documentation.z-source.z-cs .z-meta.z-tag.z-xml .z-entity.z-other.z-attribute-name {
        color: #608b4e;
        }
        .z-markup.z-deleted.z-git_gutter {
        color: #f92672;
        }
        .z-markup.z-inserted.z-git_gutter {
        color: #a6e22e;
        }
        .z-markup.z-changed.z-git_gutter {
        color: #967efb;
        }
        .z-markup.z-ignored.z-git_gutter {
        color: #565656;
        }
        .z-markup.z-untracked.z-git_gutter {
        color: #565656;
        }
        .z-git.z-changes.z-x {
        background-color: #272852;
        }
        .z-git.z-changes.z-+ {
        background-color: #275822;
        }
        .z-git.z-changes.z-- {
        background-color: #a72822;
        }
    }

    @media (prefers-color-scheme: light) {
        /*
        * theme "OneHalfLight" generated by syntect
        */

        .z-code {
        color: #383a42;
        background-color: #fafafa;
        }

        .z-comment {
        color: #a0a1a7;
        }
        .z-variable.z-parameter.z-function {
        color: #383a42;
        }
        .z-keyword {
        color: #a626a4;
        }
        .z-variable {
        color: #e45649;
        }
        .z-entity.z-name.z-function, .z-meta.z-require, .z-support.z-function.z-any-method {
        color: #0184bc;
        }
        .z-support.z-class, .z-entity.z-name.z-class, .z-entity.z-name.z-type.z-class {
        color: #c18401;
        }
        .z-meta.z-class {
        color: #c18401;
        }
        .z-keyword.z-other.z-special-method {
        color: #0184bc;
        }
        .z-storage {
        color: #a626a4;
        }
        .z-support.z-function {
        color: #0184bc;
        }
        .z-string {
        color: #50a14f;
        }
        .z-constant.z-numeric {
        color: #c18401;
        }
        .z-none {
        color: #c18401;
        }
        .z-none {
        color: #c18401;
        }
        .z-constant {
        color: #c18401;
        }
        .z-entity.z-name.z-tag {
        color: #e45649;
        }
        .z-entity.z-other.z-attribute-name {
        color: #c18401;
        }
        .z-entity.z-other.z-attribute-name.z-id, .z-punctuation.z-definition.z-entity {
        color: #c18401;
        }
        .z-meta.z-selector {
        color: #a626a4;
        }
        .z-markup.z-heading .z-punctuation.z-definition.z-heading, .z-entity.z-name.z-section {
        color: #0184bc;
        }
        .z-markup.z-bold, .z-punctuation.z-definition.z-bold {
        color: #a626a4;
        }
        .z-markup.z-italic, .z-punctuation.z-definition.z-italic {
        color: #a626a4;
        }
        .z-markup.z-raw.z-inline {
        color: #50a14f;
        }
        .z-meta.z-link {
        color: #50a14f;
        }
        .z-markup.z-quote {
        color: #50a14f;
        }
        .z-source.z-java .z-meta.z-class.z-java .z-meta.z-method.z-java {
        color: #383a42;
        }
        .z-source.z-java .z-meta.z-class.z-java .z-meta.z-class.z-body.z-java {
        color: #383a42;
        }
        .z-source.z-js .z-meta.z-function.z-js .z-variable.z-parameter.z-function.z-js {
        color: #e45649;
        }
        .z-source.z-js .z-variable.z-other.z-readwrite.z-js {
        color: #e45649;
        }
        .z-source.z-js .z-variable.z-other.z-object.z-js {
        color: #383a42;
        }
        .z-source.z-js .z-meta.z-function-call.z-method.z-js .z-variable.z-other.z-readwrite.z-js {
        color: #e45649;
        }
        .z-source.z-js .z-meta.z-block.z-js .z-variable.z-other.z-readwrite.z-js {
        color: #e45649;
        }
        .z-source.z-js .z-meta.z-block.z-js .z-variable.z-other.z-object.z-js {
        color: #383a42;
        }
        .z-source.z-js .z-meta.z-block.z-js .z-meta.z-function-call.z-method.z-js .z-variable.z-other.z-readwrite.z-js {
        color: #383a42;
        }
        .z-source.z-js .z-meta.z-function-call.z-method.z-js .z-variable.z-function.z-js {
        color: #383a42;
        }
        .z-source.z-js .z-meta.z-property.z-object.z-js .z-entity.z-name.z-function.z-js {
        color: #0184bc;
        }
        .z-source.z-js .z-support.z-constant.z-prototype.z-js {
        color: #383a42;
        }
        .z-markup.z-inserted {
        color: #98c379;
        }
        .z-markup.z-deleted {
        color: #e06c75;
        }
        .z-markup.z-changed {
        color: #e5c07b;
        }
        .z-string.z-regexp {
        color: #50a14f;
        }
        .z-constant.z-character.z-escape {
        color: #0997b3;
        }
        .z-invalid.z-illegal {
        color: #fafafa;
        background-color: #e06c75;
        }
        .z-invalid.z-broken {
        color: #fafafa;
        background-color: #e5c07b;
        }
        .z-invalid.z-deprecated {
        color: #fafafa;
        background-color: #e5c07b;
        }
        .z-invalid.z-unimplemented {
        color: #fafafa;
        background-color: #c678dd;
        }
    }
</style>
{% block page_structured_data %}
{% if not page.extra.info_page %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ page.permalink | safe }}"
    },
    "headline": "{{ page.title | escape }}",
    {% if page.description %}
    "description": "{{ page.description | escape }}",
    {% endif %}
    "datePublished": "{{ page.date | date(format='%Y-%m-%dT%H:%M:%S%:z') }}",
    {% if page.updated %}
    "dateModified": "{{ page.updated | date(format='%Y-%m-%dT%H:%M:%S%:z') }}",
    {% else %}
    "dateModified": "{{ page.date | date(format='%Y-%m-%dT%H:%M:%S%:z') }}",
    {% endif %}
    "author": {
        "@type": "Person",
        "name": "Lev Vereshchagin",
        "url": "https://vrslev.com"
    },
    "publisher": {
        "@type": "Person",
        "name": "Lev Vereshchagin",
        "url": "https://vrslev.com"
    },
    "articleBody": "{{ page.content | striptags | escape | truncate(length=200) }}"
}
</script>
{% endif %}
{% endblock page_structured_data %}

<article>
    <h1 class="page-title">{{ page.title }}</h1>
    {% if not page.extra.info_page %}
    <div class="post-meta">
        {% if page.date %}
        {% if lang == "ru" %}
        {% set english_days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] %}
        {% set russian_days = ["понедельник", "вторник", "среда", "четверг", "пятница", "суббота", "воскресенье"] %}
        {% set english_day = page.date | date(format="%A") %}
        {% for i in range(end=7) %}
        {% if english_days[i] == english_day %}
        {% set_global russian_day = russian_days[i] %}
        {% endif %}
        {% endfor %}
        {{ page.date | date(format="%Y-%m-%d") }}, {{ russian_day }}
        {% else %}
        {{ page.date | date(format="%Y-%m-%d, %A") }}
        {% endif %}
        {% endif %}
        {% set_global is_original = false %}
        {% set_global translation_type = "" %}
        {% set_global tag_count = 0 %}
        {% for key, value in page.taxonomies %}
        {% if key == "tags" %}
        {% if "original-lang" in value %}
        {% set_global is_original = true %}
        {% set_global tag_count = tag_count + 1 %}
        {% endif %}
        {% if "human-translation" in value %}
        {% set_global translation_type = "human" %}
        {% set_global tag_count = tag_count + 1 %}
        {% endif %}
        {% if "ai-translation" in value %}
        {% set_global translation_type = "ai" %}
        {% set_global tag_count = tag_count + 1 %}
        {% endif %}
        {% endif %}
        {% endfor %}
        {% if tag_count > 1 %}
        {{ throw(message="Multiple translation tags found in " ~ page.relative_path ~ "! Posts must have exactly one of:
        original-lang, human-translation, ai-translation") }}
        {% endif %}
        {% if not is_original %}
        &nbsp;&middot;&nbsp;&nbsp;
        {% if translation_type == "ai" %}
        {% if page.lang == "en" %}
        Translated from Russian with AI
        {% elif page.lang == "ru" %}
        Переведено с английского с помощью ИИ
        {% endif %}
        {% else %}
        {% if page.lang == "en" %}
        Translated from Russian
        {% elif page.lang == "ru" %}
        Перевод с английского
        {% endif %}
        {% endif %}
        {% endif %}
        {% if page.translations %}
        {% for translation in page.translations %}
        {% if is_original %}
        {% if page.lang == "en" and translation.lang == "ru" %}
        &nbsp;&middot;&nbsp;&nbsp;<a href="{{ translation.permalink }}">Читать перевод</a>
        {% elif page.lang == "ru" and translation.lang == "en" %}
        &nbsp;&middot;&nbsp;&nbsp;<a href="{{ translation.permalink }}">Read translation</a>
        {% endif %}
        {% else %}
        {% if page.lang == "en" and translation.lang == "ru" %}
        &nbsp;&middot;&nbsp;&nbsp;<a href="{{ translation.permalink }}">Читать оригинал</a>
        {% elif page.lang == "ru" and translation.lang == "en" %}
        &nbsp;&middot;&nbsp;&nbsp;<a href="{{ translation.permalink }}">Read English original</a>
        {% endif %}
        {% endif %}
        {% endfor %}
        {% endif %}
    </div>
    {% endif %}
    <div class="page-content">
        {{ page.content | safe }}
    </div>

    {% if not page.extra.info_page %}
    <nav aria-label="Post navigation" class="post-footer">
        <a href="{% if lang == "ru" %}/ru/{% else %}/{% endif %}" class="post-nav-link">← {% if lang == "ru"
            %}Главная{% else %}Home{% endif %}</a>
        {% if page.higher %}
        <div>
            <a href="{{ page.higher.permalink }}" class="post-nav-link">
                {{ page.higher.title }} →
            </a>
        </div>
        {% endif %}
    </nav>
    {% endif %}
</article>
{% endblock content %}
